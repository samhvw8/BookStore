<div class="container">
  <% provide(:title, 'New comic') %>
  <% provide(:button_text, 'Submit') %>
  <h2>Add new comic</h2>
  <%= form_for @comic, url: admin_comics_path, :multipart => true do |f| %>
      <%= render partial: 'shared/err', locals: {err: @comic} %>
      <div class="form-group">
        <%= f.label :title %>
        <%= f.text_field :title, class: 'form-control' %>
      </div>

      <div class="form-group">
        <label>Author</label><br>
        <div class="row">
          <% @authors.each do |author| %>
              <div class="col-xs-3">
                <input type="checkbox" name="authors[]" value="<%= author.id %>"><%= author.name %>
              </div>
          <% end %>
          <div class="col-xs-12" id="add-author-btn">
            <input type="button" class="btn btn-success" value="Add Author"
                      data-toggle="modal" data-target="#add-author-modal">
          </div>
        </div>
      </div>

      <div class="form-group">
        <label>Category</label><br>
        <div class="row">
          <% @categories.each do |category| %>
              <div class="col-xs-3">
                <input type="checkbox" name="categories[]" value="<%= category.id %>"><%= category.title %>
              </div>
          <% end %>
          <div class="col-xs-12" id="add-category-btn">
            <input type="button" class="btn btn-success" value="Add Category"
                     data-toggle="modal" data-target="#add-category-modal">
          </div>
        </div>
      </div>

      <div class="form-group">
        <%= f.label :cover %>
        <%= f.file_field :cover, accept: 'image/png,image/gif,image/jpeg', class: 'form-control' %>
      </div>

      <div class="form-group">
      <%= f.label :description %>
      <%= f.text_area :description, class: 'form-control' %>
      </div>

      <%= f.submit yield(:button_text), class: "btn btn-primary" %>
  <% end %>
</div>


<!-- Author Modal -->
<div id="add-author-modal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">Add new author</h4>
      </div>
      <div class="modal-body">
        <%= form_for @author, remote: true, url: admin_authors_path do |f| %>
          <div class="form-group">
            <%= f.label :name%>
            <%= f.text_field :name, class: 'form-control' %>
          </div>
          <div class="form-group">
            <%= f.label :bio %>
            <%= f.text_area :bio, class: 'form-control' %>
          </div>
            <div class="error-container">

            </div>
          <%= f.submit yield(:button_text), class: "btn btn-primary" %>
        <% end %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>

<!-- Category Modal -->
<div id="add-category-modal" class="modal fade" role="dialog">
  <div class="modal-dialog">

    <!-- Modal content-->
    <div class="modal-content">
      <div class="modal-header">
        <button type="button" class="close" data-dismiss="modal">&times;</button>
        <h4 class="modal-title">New category</h4>
      </div>
      <div class="modal-body">

        <%= form_for @category, remote: true, url: admin_categories_path do |f| %>
            <div class="form-group">
              <%= f.label :title %>
              <%= f.text_field :title, class: 'form-control' %>
            </div>
            <%= f.submit yield(:button_text), class: "btn btn-primary" %>
        <% end %>
      </div>
      <div class="modal-footer">
        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
      </div>
    </div>

  </div>
</div>